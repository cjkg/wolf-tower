from __future__ import annotations

from typing import Iterator, List, Tuple, TYPE_CHECKING
from numpy.core.records import array
from numpy.random import default_rng

from game_map import GameMap
import numpy as np
from shapes import octagon
import sys

import tile_types
np.set_printoptions(threshold=sys.maxsize)


if TYPE_CHECKING:
    from entity import Entity

def map_outline(room_axis_length):
    while True:
        max_row_col=room_axis_length-1
        map_outline=np.zeros((room_axis_length,room_axis_length),int)
        column=np.random.randint(room_axis_length)
        row=0
        done=False
        while True:
            x_direction=0
            y_direction=0
            if np.random.random_sample()<0.5:
                room_type=3
            else:
                room_type=1
            #room_type=1
            #need to make it flip directions on hitting walls
            room_type_number=np.random.randint(1,6)
            
            if room_type_number in set([1,2]):
                x_direction=-1
                y_direction=0
            elif room_type_number in set([3,4]):
                x_direction=1
                y_direction=0
            else:
                y_direction=1
            
            if y_direction>0 and row<max_row_col:
                room_type=2
            
            if column==max_row_col and x_direction==1 and row<max_row_col:
                x_direction=0
                y_direction=1
                room_type=2
            elif column==0 and x_direction==-1 and row<max_row_col:
                x_direction=0
                y_direction=1
                room_type=2
            elif column==max_row_col and x_direction==1:
                room_type=4
                done=True
            elif column==0  and x_direction==-1:
                room_type=4
                done=True
            elif row==max_row_col and y_direction==1:
                room_type=4
                done=True
            else:
                y_direction=0
            
            map_outline[row][column]=room_type

            if done:
                break
            column+=x_direction
            row+=y_direction
            if room_type==2 and column==max_row_col:
                x_direction=-1
            elif room_type==2 and column==0:
                x_direction=1
        if np.count_nonzero(map_outline)>=.75*room_axis_length**2:
            break
    return map_outline

def generate_dungeon(room_axis_length: int,
                            map_width: int,
                            map_height: int) -> GameMap:

    dungeon=GameMap(40,40)
    zero_rooms=np.array([
                        [["#","#","#","#","#","#","#","#","#","#"],
                        ["#","·","·","·","·","·","·","·","·","#"],
                        ["#","·","·","·","·","·","·","·","·","#"],
                        ["#","·","·","·","·","·","·","·","·","#"],
                        ["#","·","·","·","·","·","·","·","·","#"],
                        ["#","·","·","·","·","·","·","·","·","#"],
                        ["#","·","·","·","·","·","·","·","·","#"],
                        ["#","·","·","·","·","·","·","·","·","#"],
                        ["#","·","·","·","·","·","·","·","·","#"],
                        ["#","#","#","#","#","#","#","#","#","#"]]
                        ])

    one_rooms=np.array([
                        [["╔","═","═","═","═","═","═","═","═","╗"],
                        ["║","Φ","│","≈","≈","≈","≈","│","Φ","║"],
                        ["║","Φ","│","≈","≈","≈","≈","│","Φ","║"],
                        ["║","Φ","└","─","─","─","─","┘","Φ","║"],
                        ["╝","·","·","·","·","·","·","·","·","╚"],
                        ["·","·","■","·","·","·","·","■","·","·"],
                        ["╗","·","·","░","░","░","░","·","·","╔"],
                        ["║","·","·","░","░","░","░","·","·","║"],
                        ["║","Φ","·","·","·","·","·","·","Φ","║"],
                        ["╚","═","═","═","═","═","═","═","═","╝"]],
                        
                        [["╔","═","═","═","═","═","═","═","═","╗"],
                        ["║","Φ","░","░","░","░","░","░","Φ","║"],
                        ["║","Φ","░","░","░","░","░","░","Φ","║"],
                        ["║","·","·","·","·","·","·","·","·","║"],
                        ["╩","═","═","═","═","+","═","═","═","╩"],
                        ["·","·","·","·","·","·","·","·","·","·"],
                        ["╦","+","═","═","╗","·","╔","═","+","╦"],
                        ["║","·","·","·","║","·","║","·","·","║"],
                        ["║","·","·","·","║","·","║","·","·","║"],
                        ["╚","═","═","═","╩","═","╩","═","═","╝"]],

                        [[" ","╔","═","═","═","═","═","═","╗"," "],
                        ["╔","╝","Φ","Φ","Φ","Φ","Φ","Φ","╚","╗"],
                        ["║","·","■","░","░","░","░","■","·","║"],
                        ["║","·","░","░","░","░","░","░","·","║"],
                        ["╝","·","░","░","■","■","░","░","·","╚"],
                        ["·","·","░","░","■","■","░","░","·","·"],
                        ["╗","·","░","░","░","░","░","░","·","╔"],
                        ["║","·","■","░","░","░","░","■","·","║"],
                        ["╚","╗","Φ","Φ","Φ","Φ","Φ","Φ","╔","╝"],
                        [" ","╚","═","═","═","═","═","═","╝"," "]],
                        

                        [["╔","═","═","═","═","═","═","═","═","╗"],
                        ["║","♣","·","♣","·","·","♣","·","♣","║"],
                        ["║","☼","·","·","·","·","·","·","☼","║"],
                        ["║","☼","·","·","·","·","·","·","☼","║"],
                        ["╝","☼","·","┌","─","─","┐","·","☼","╚"],
                        ["·","·","·","│","≈","≈","│","·","·","·"],
                        ["╗","☼","·","└","─","─","┘","·","☼","╔"],
                        ["║","☼","·","·","·","·","·","·","☼","║"],
                        ["║","♣","·","♣","·","·","♣","·","♣","║"],
                        ["╚","═","═","═","═","═","═","═","═","╝"]],

                        [["╔","═","═","═","═","═","═","═","═","╗"],
                        ["║","■","·","·","·","·","·","·","■","║"],
                        ["║","Φ","·","·","·","·","·","·","Φ","║"],
                        ["║","■","·","·","·","·","·","·","■","║"],
                        ["╩","═","═","═","═","+","═","═","═","╩"],
                        ["░","░","░","░","░","░","░","░","░","░"],
                        ["╦","═","═","═","+","═","═","═","═","╦"],
                        ["║","·","·","·","·","·","·","·","·","║"],
                        ["║","■","·","·","·","·","·","·","■","║"],
                        ["╚","═","═","═","═","═","═","═","═","╝"]],

                        [[" "," "," "," "," "," "," "," "," "," "],
                        [" "," "," ","╔","═","═","╗"," "," "," "],
                        [" "," ","╔","╝","Φ","Φ","╚","╗"," "," "],
                        [" ","╔","╝","░","░","░","░","╚","╗"," "],
                        ["═","╝","·","■","░","░","■","·","╚","═"],
                        ["·","·","·","░","░","░","░","·","·","·"],
                        ["═","╗","·","■","░","░","■","·","╔","═"],
                        [" ","╚","╗","░","░","░","░","╔","╝"," "],
                        [" "," ","╚","╗","Φ","Φ","╔","╝"," "," "],
                        [" "," "," ","╚","═","═","╝"," "," "," "]],

                        [["╔","═","═","═","═","╦","═","═","═","╗"],
                        ["║","Φ","·","·","·","║","·","·","Φ","║"],
                        ["║","·","·","·","·","║","·","·","·","║"],
                        ["║","·","·","·","·","║","·","·","·","║"],
                        ["╩","═","═","+","═","╩","═","+","═","╩"],
                        ["░","░","░","░","░","░","░","░","░","░"],
                        ["╦","═","+","═","╦","═","+","═","═","╦"],
                        ["║","·","·","·","║","·","·","·","·","║"],
                        ["║","Φ","·","·","║","·","·","·","Φ","║"],
                        ["╚","═","═","═","╩","═","═","═","═","╝"]],

                        [[" "," "," "," "," "," "," "," "," "," "],
                        ["╔","═","═","═","═","═","═","═","═","╗"],
                        ["║","Φ","▄","▄","·","·","▄","▄","Φ","║"],
                        ["║","·","░","░","·","·","░","░","·","║"],
                        ["╝","·","░","■","░","░","■","░","·","╚"],
                        ["░","░","░","░","░","░","░","░","░","░"],
                        ["╗","·","░","■","░","░","■","░","·","╔"],
                        ["║","·","░","░","·","·","░","░","·","║"],
                        ["║","Φ","▀","▀","·","·","▀","▀","Φ","║"],
                        ["╚","═","═","═","═","═","═","═","═","╝"]],

                        [["╔","═","═","═","═","═","═","═","═","╗"],
                        ["║","■","·","·","·","·","·","·","■","║"],
                        ["║","·","·","╔","═","═","╗","·","·","║"],
                        ["║","·","·","║","Φ","Φ","║","·","·","║"],
                        ["╩","═","+","╝","·","·","╚","═","═","╩"],
                        ["░","░","░","░","░","░","░","░","░","░"],
                        ["╦","+","═","╗","·","·","╔","═","+","╦"],
                        ["║","·","·","║","Φ","Φ","·","·","·","║"],
                        ["║","·","·","╠","═","═","╣","·","·","║"],
                        ["╚","═","═","╝"," "," ","╚","═","═","╝"]],

                        [[" "," "," "," "," "," "," "," "," "," "],
                        [" "," ","╔","═","═","═","═","╗"," "," "],
                        [" ","╔","╝","Φ","·","·","Φ","╚","╗"," "],
                        ["╔","╝","░","░","░","░","░","░","╚","╗"],
                        ["╝","·","░","┌","─","─","┐","░","·","╚"],
                        ["░","░","░","│","╥","╥","│","░","░","░"],
                        ["╗","·","░","└","·","·","┘","░","·","╔"],
                        ["╚","╗","░","░","░","░","░","░","╔","╝"],
                        [" ","╚","╗","Φ","·","·","Φ","╔","╝"," "],
                        [" "," ","╚","═","═","═","═","╝"," "," "]]

                    ])

    two_rooms=np.array([
                        [["╔","═","═","═","═","═","═","═","═","╗"],
                        ["║","·","·","·","·","·","·","·","·","║"],
                        ["║","·","·","·","·","·","·","·","·","║"],
                        ["║","·","·","·","·","·","·","·","·","║"],
                        ["╩","═","═","═","═","+","═","═","═","╩"],
                        ["░","░","░","░","░","░","░","░","░","░"],
                        ["╦","═","+","═","╗","░","╔","═","Θ","╦"],
                        ["║","·","·","·","║","░","║","·","·","║"],
                        ["║","·","·","·","║","░","║","·","·","║"],
                        ["╚","═","═","═","╣","░","╠","═","═","╝"]],

                        [["╔","═","═","═","╦","═","╦","═","═","╗"],
                        ["║","·","·","·","║","░","║","·","·","║"],
                        ["║","·","·","·","+","░","+","·","·","║"],
                        ["║","·","·","·","║","░","║","·","·","║"],
                        ["╩","═","═","═","╝","░","╚","═","═","╩"],
                        ["░","░","░","░","░","░","░","░","░","░"],
                        ["╦","═","+","═","╗","░","╔","+","═","╦"],
                        ["║","·","·","·","║","░","║","·","·","║"],
                        ["║","·","·","·","║","░","║","·","·","║"],
                        ["╚","═","═","═","╣","░","╠","═","═","╝"]],

                        [["╔","═","═","═","═","═","╦","═","═","╗"],
                        ["║","·","·","·","·","·","║","·","·","║"],
                        ["║","·","·","·","·","·","║","·","·","║"],
                        ["╠","═","╦","+","╦","+","╬","Θ","╦","╣"],
                        ["╝","·","║","·","║","·","║","·","╚","╩"],
                        ["·","·","║","·","║","·","║","·","·","·"],
                        ["╗","·","║","·","║","·","·","·","·","╔"],
                        ["║","·","║","·","╠","═","═","═","·","║"],
                        ["║","·","·","·","║","·","·","·","·","║"],
                        ["╚","═","═","═","╩","·","╔","═","═","╝"]],
                        
                        [["╔","═","═","═","═","═","═","═","═","╗"],
                        ["║","·","·","·","·","·","·","·","·","║"],
                        ["║","·","·","·","·","·","·","·","·","║"],
                        ["║","·","·","·","·","·","·","·","·","║"],
                        ["╩","═","╦","+","═","═","═","╦","═","╩"],
                        ["·","·","║","·","·","·","·","+","·","·"],
                        ["╗","·","║","·","·","·","·","║","·","╔"],
                        ["║","·","╚","+","╦","═","═","╝","·","║"],
                        ["║","·","·","·","║","·","·","·","·","║"],
                        ["╚","═","═","═","╣","·","╔","═","═","╝"]],

                        [["╔","═","═","═","╦","═","═","═","═","╗"],
                        ["║","·","·","·","║","·","·","·","·","║"],
                        ["║","·","·","·","Θ","·","·","·","·","║"],
                        ["╠","═","+","═","╩","═","═","═","═","╣"],
                        ["╝","░","░","░","░","░","░","░","░","╚"],
                        ["░","░","╔","═","═","═","═","╗","░","░"],
                        ["╦","═","╝","·","·","·","·","║","░","╔"],
                        ["║","·","·","·","╔","+","═","╝","░","║"],
                        ["║","·","·","·","║","░","░","░","░","║"],
                        ["╚","═","═","═","╣","░","╔","═","═","╝"]],

                        [["╔","═","═","═","═","═","═","═","═","╗"],
                        ["║","░","░","░","░","░","░","░","░","║"],
                        ["║","░","╔","═","╦","═","═","╗","░","║"],
                        ["║","░","║","·","Θ","·","·","║","░","║"],
                        ["╝","░","║","·","║","·","·","║","░","╚"],
                        ["░","░","║","·","║","·","·","║","░","░"],
                        ["╦","═","╩","+","╣","·","·","║","░","╔"],
                        ["║","·","·","·","╠","═","═","╝","░","║"],
                        ["║","·","·","·","+","░","░","░","░","║"],
                        ["╚","═","═","═","╣","░","╔","═","═","╝"]],

                        [["╔","═","═","═","═","═","═","═","═","╗"],
                        ["║","·","·","·","·","·","·","·","·","║"],
                        ["╠","═","+","═","╦","═","═","+","═","╣"],
                        ["║","·","·","·","║","·","·","·","·","║"],
                        ["╝","·","·","·","║","·","·","·","·","╚"],
                        ["·","·","·","·","║","·","·","·","·","·"],
                        ["╦","═","═","═","╬","═","═","═","+","╦"],
                        ["║","·","·","·","║","·","·","·","·","║"],
                        ["║","·","·","·","+","·","·","·","·","║"],
                        ["╚","═","═","═","╣","·","╔","═","═","╝"]],

                        [["╔","═","═","╦","═","═","═","═","═","╗"],
                        ["║","·","·","+","·","·","·","·","·","║"],
                        ["║","·","·","║","·","·","·","·","·","║"],
                        ["║","·","·","║","·","·","·","·","·","║"],
                        ["╩","═","═","╩","═","╦","═","+","═","╩"],
                        ["░","░","░","░","░","║","·","·","·","·"],
                        ["╦","═","═","╗","░","║","·","·","·","╔"],
                        ["║","·","·","+","░","╚","╗","·","·","║"],
                        ["║","·","·","║","░","░","+","·","·","║"],
                        ["╚","═","═","╩","╗","░","╠","═","═","╝"]],

                        [["╔","═","═","═","═","═","═","═","═","╗"],
                        ["║","Φ","·","·","·","·","·","·","Φ","║"],
                        ["║","·","·","■","░","░","■","·","·","║"],
                        ["║","·","■","░","░","░","░","■","·","║"],
                        ["╝","·","░","░","■","■","░","░","·","╚"],
                        ["·","·","░","░","■","■","░","░","·","·"],
                        ["╗","·","■","░","░","░","░","■","·","╔"],
                        ["║","·","·","■","░","░","■","·","·","║"],
                        ["║","Φ","·","·","·","·","·","·","Φ","║"],
                        ["╚","═","═","═","╗","·","╔","═","═","╝"]],

                        [[" "," "," "," "," "," "," "," "," "," "],
                        ["╔","═","═","═","═","═","═","═","═","╗"],
                        ["║","·","·","·","░","░","·","·","·","║"],
                        ["║","·","·","■","░","░","■","·","·","║"],
                        ["╝","·","■","■","░","░","■","■","·","╚"],
                        ["░","░","░","░","░","░","░","░","░","░"],
                        ["╗","·","■","■","░","░","■","■","·","╔"],
                        ["║","·","·","■","░","░","■","·","·","║"],
                        ["║","·","·","·","░","░","·","·","·","║"],
                        ["╚","═","═","═","╗","░","╔","═","═","╝"]]








                        ])

    three_rooms=np.array([
                        [["╔","═","═","═","╝","·","╚","═","═","╗"],
                        ["║","·","·","·","·","·","·","·","·","║"],
                        ["║","·","╔","═","═","+","═","╗","·","║"],
                        ["║","·","║","·","·","·","·","║","·","║"],
                        ["╝","·","║","·","·","·","·","║","·","╚"],
                        ["·","·","║","·","·","·","·","║","·","·"],
                        ["╦","═","╩","╦","+","═","╦","╩","£","╦"],
                        ["║","·","·","+","·","·","║","·","·","║"],
                        ["║","·","·","║","·","·","║","·","·","║"],
                        ["╚","═","═","╩","═","═","╩","═","═","╝"]],
                        
                        [["╔","═","═","═","╝","·","╚","═","═","╗"],
                        ["║","·","·","·","·","·","·","·","·","║"],
                        ["║","·","·","■","·","·","■","·","·","║"],
                        ["║","·","■","·","░","░","·","■","·","║"],
                        ["╝","·","·","░","╔","╗","░","·","·","╚"],
                        ["·","·","·","░","╚","╝","░","·","·","·"],
                        ["╗","·","■","·","░","░","·","■","·","╔"],
                        ["║","·","·","■","·","·","■","·","·","║"],
                        ["║","·","·","·","·","·","·","·","·","║"],
                        ["╚","═","═","═","═","═","═","═","═","╝"]],

                        [["╔","═","═","═","╝","·","╚","═","═","╗"],
                        ["║","■","·","·","·","·","·","·","■","║"],
                        ["║","·","░","░","░","░","░","░","·","║"],
                        ["║","·","░","·","·","·","·","░","·","║"],
                        ["╝","·","░","·","■","■","·","░","·","╚"],
                        ["░","░","░","·","■","■","·","░","░","░"],
                        ["╗","·","░","·","·","·","·","░","·","╔"],
                        ["║","·","░","░","░","░","░","░","·","║"],
                        ["║","■","·","·","·","·","·","·","■","║"],
                        ["╚","═","═","═","═","═","═","═","═","╝"]],
                        
                        [["╔","═","═","═","╣","·","╚","═","═","╗"],
                        ["║","·","·","·","║","·","·","·","·","║"],
                        ["║","·","║","·","╚","═","═","═","·","║"],
                        ["║","·","║","·","·","·","·","·","·","║"],
                        ["╝","·","╚","═","═","═","╦","═","═","╩"],
                        ["·","·","·","·","·","·","║","·","·","·"],
                        ["╦","═","═","═","═","+","╣","·","╔","═"],
                        ["║","·","·","·","·","·","║","·","║"," "],
                        ["║","·","·","·","·","·","+","·","║"," "],
                        ["╚","═","═","═","═","═","╩","═","╝"," "]],
                        #dummy rooms:
                        [["╔","═","═","═","╝","·","╚","═","═","╗"],
                        ["║","·","·","·","·","·","·","·","·","║"],
                        ["║","·","·","·","·","·","·","·","·","║"],
                        ["║","·","·","·","·","·","·","·","·","║"],
                        ["╝","·","·","·","·","·","·","·","·","╚"],
                        ["·","·","·","·","·","·","·","·","·","·"],
                        ["╗","·","·","·","·","·","·","·","·","╔"],
                        ["║","·","·","·","·","·","·","·","·","║"],
                        ["║","·","·","·","·","·","·","·","·","║"],
                        ["╚","═","═","═","═","═","═","═","═","╝"]],

                        [["╔","═","═","═","╝","·","╚","═","═","╗"],
                        ["║","·","·","·","·","·","·","·","·","║"],
                        ["║","·","·","·","·","·","·","·","·","║"],
                        ["║","·","·","·","·","·","·","·","·","║"],
                        ["╝","·","·","·","·","·","·","·","·","╚"],
                        ["·","·","·","·","·","·","·","·","·","·"],
                        ["╗","·","·","·","·","·","·","·","·","╔"],
                        ["║","·","·","·","·","·","·","·","·","║"],
                        ["║","·","·","·","·","·","·","·","·","║"],
                        ["╚","═","═","═","═","═","═","═","═","╝"]],

                        [["╔","═","═","═","╝","·","╚","═","═","╗"],
                        ["║","·","·","·","·","·","·","·","·","║"],
                        ["║","·","·","·","·","·","·","·","·","║"],
                        ["║","·","·","·","·","·","·","·","·","║"],
                        ["╝","·","·","·","·","·","·","·","·","╚"],
                        ["·","·","·","·","·","·","·","·","·","·"],
                        ["╗","·","·","·","·","·","·","·","·","╔"],
                        ["║","·","·","·","·","·","·","·","·","║"],
                        ["║","·","·","·","·","·","·","·","·","║"],
                        ["╚","═","═","═","═","═","═","═","═","╝"]],

                        [["╔","═","═","═","╝","·","╚","═","═","╗"],
                        ["║","·","·","·","·","·","·","·","·","║"],
                        ["║","·","·","·","·","·","·","·","·","║"],
                        ["║","·","·","·","·","·","·","·","·","║"],
                        ["╝","·","·","·","·","·","·","·","·","╚"],
                        ["·","·","·","·","·","·","·","·","·","·"],
                        ["╗","·","·","·","·","·","·","·","·","╔"],
                        ["║","·","·","·","·","·","·","·","·","║"],
                        ["║","·","·","·","·","·","·","·","·","║"],
                        ["╚","═","═","═","═","═","═","═","═","╝"]],

                        [["╔","═","═","═","╝","·","╚","═","═","╗"],
                        ["║","·","·","·","·","·","·","·","·","║"],
                        ["║","·","·","·","·","·","·","·","·","║"],
                        ["║","·","·","·","·","·","·","·","·","║"],
                        ["╝","·","·","·","·","·","·","·","·","╚"],
                        ["·","·","·","·","·","·","·","·","·","·"],
                        ["╗","·","·","·","·","·","·","·","·","╔"],
                        ["║","·","·","·","·","·","·","·","·","║"],
                        ["║","·","·","·","·","·","·","·","·","║"],
                        ["╚","═","═","═","═","═","═","═","═","╝"]],

                        [["╔","═","═","═","╝","·","╚","═","═","╗"],
                        ["║","·","·","·","·","·","·","·","·","║"],
                        ["║","·","·","·","·","·","·","·","·","║"],
                        ["║","·","·","·","·","·","·","·","·","║"],
                        ["╝","·","·","·","·","·","·","·","·","╚"],
                        ["·","·","·","·","·","·","·","·","·","·"],
                        ["╗","·","·","·","·","·","·","·","·","╔"],
                        ["║","·","·","·","·","·","·","·","·","║"],
                        ["║","·","·","·","·","·","·","·","·","║"],
                        ["╚","═","═","═","═","═","═","═","═","╝"]]
                        
                        ])

    four_rooms=np.array([
                        [["#","#","#","#","#","·","#","#","#","#"],
                        ["#","·","·","·","·","·","·","·","·","#"],
                        ["#","·","·","·","·","·","·","·","·","#"],
                        ["#","·","·","·","·","·","·","·","·","#"],
                        ["#","·","·","·","·","·","·","·","·","#"],
                        ["·","·","·","·","·",">","·","·","·","·"],
                        ["#","·","·","·","·","·","·","·","·","#"],
                        ["#","·","·","·","·","·","·","·","·","#"],
                        ["#","·","·","·","·","·","·","·","·","#"],
                        ["#","#","#","#","#","#","#","#","#","#"]]
                        ])
#    for x in np.nditer(dungeon_outline):
#        for y in np.nditer(x):
#            if dungeon_outline=``=["#"]:
#                dungeon.tiles[]
    rooms=map_outline(4)
    rng=np.random.default_rng()
    room_indices=rng.integers(low=0,high=10,size=16)
    i=0
    for x_map in range(0,4):
        for y_map in range(0,4):
            ind=room_indices[i]
            i+=1
            room = rooms[y_map][x_map]
            if room==0:
                room_type=zero_rooms[0]
            elif room==1:
                room_type=one_rooms[ind]
            elif room==2:
                room_type=two_rooms[ind]
            elif room==3:
                room_type=three_rooms[ind]
            else:
                room_type=four_rooms[0]
            x_room_offset=x_map*10
            y_room_offset=y_map*10           
            for x_room in range(room_axis_length):
                for y_room in range(room_axis_length):
                    if room_type[y_room][x_room]=="#":
                        dungeon.tiles[x_room+x_room_offset,y_room+y_room_offset]=tile_types.wall
                    elif room_type[y_room][x_room]=="·":
                        dungeon.tiles[x_room+x_room_offset,y_room+y_room_offset]=tile_types.floor
                    elif room_type[y_room][x_room]==">":
                        dungeon.tiles[x_room+x_room_offset,y_room+y_room_offset]=tile_types.stairs_up
                    elif room_type[y_room][x_room]=="<":
                        dungeon.tiles[x_room+x_room_offset,y_room+y_room_offset]=tile_types.stairs_down
                    elif room_type[y_room][x_room]=="+":
                        dungeon.tiles[x_room+x_room_offset,y_room+y_room_offset]=tile_types.door
                    elif room_type[y_room][x_room]=="╔":
                        dungeon.tiles[x_room+x_room_offset,y_room+y_room_offset]=tile_types.wall_ul_corner                    
                    elif room_type[y_room][x_room]=="═":
                        dungeon.tiles[x_room+x_room_offset,y_room+y_room_offset]=tile_types.wall_horizontal
                    elif room_type[y_room][x_room]=="╗":
                        dungeon.tiles[x_room+x_room_offset,y_room+y_room_offset]=tile_types.wall_ur_corner
                    elif room_type[y_room][x_room]=="║":
                        dungeon.tiles[x_room+x_room_offset,y_room+y_room_offset]=tile_types.wall_vertical
                    elif room_type[y_room][x_room]=="╝":
                        dungeon.tiles[x_room+x_room_offset,y_room+y_room_offset]=tile_types.wall_lr_corner
                    elif room_type[y_room][x_room]=="╚":
                        dungeon.tiles[x_room+x_room_offset,y_room+y_room_offset]=tile_types.wall_ll_corner
                    elif room_type[y_room][x_room]=="╠":
                        dungeon.tiles[x_room+x_room_offset,y_room+y_room_offset]=tile_types.left_t
                    elif room_type[y_room][x_room]=="╣":
                        dungeon.tiles[x_room+x_room_offset,y_room+y_room_offset]=tile_types.right_t
                    elif room_type[y_room][x_room]=="╩":
                        dungeon.tiles[x_room+x_room_offset,y_room+y_room_offset]=tile_types.bottom_t
                    elif room_type[y_room][x_room]=="╦":
                        dungeon.tiles[x_room+x_room_offset,y_room+y_room_offset]=tile_types.top_t
                    elif room_type[y_room][x_room]=="Φ":
                        dungeon.tiles[x_room+x_room_offset,y_room+y_room_offset]=tile_types.vase
                    elif room_type[y_room][x_room]=="░":
                        dungeon.tiles[x_room+x_room_offset,y_room+y_room_offset]=tile_types.carpet
                    elif room_type[y_room][x_room]=="■":
                        dungeon.tiles[x_room+x_room_offset,y_room+y_room_offset]=tile_types.pillar
                    elif room_type[y_room][x_room]=="≈":
                        dungeon.tiles[x_room+x_room_offset,y_room+y_room_offset]=tile_types.water
                    elif room_type[y_room][x_room]=="▲":
                        dungeon.tiles[x_room+x_room_offset,y_room+y_room_offset]=tile_types.pyramid
                    elif room_type[y_room][x_room]=="♣":
                        dungeon.tiles[x_room+x_room_offset,y_room+y_room_offset]=tile_types.herb
                    elif room_type[y_room][x_room]=="☼":
                        dungeon.tiles[x_room+x_room_offset,y_room+y_room_offset]=tile_types.flower
                    elif room_type[y_room][x_room]=="┌":
                        dungeon.tiles[x_room+x_room_offset,y_room+y_room_offset]=tile_types.low_wall_ul
                    elif room_type[y_room][x_room]=="┐":
                        dungeon.tiles[x_room+x_room_offset,y_room+y_room_offset]=tile_types.low_wall_ur
                    elif room_type[y_room][x_room]=="─":
                        dungeon.tiles[x_room+x_room_offset,y_room+y_room_offset]=tile_types.low_wall_horiz
                    elif room_type[y_room][x_room]=="│":
                        dungeon.tiles[x_room+x_room_offset,y_room+y_room_offset]=tile_types.low_wall_vert
                    elif room_type[y_room][x_room]=="└":
                        dungeon.tiles[x_room+x_room_offset,y_room+y_room_offset]=tile_types.low_wall_ll
                    elif room_type[y_room][x_room]=="┘":
                        dungeon.tiles[x_room+x_room_offset,y_room+y_room_offset]=tile_types.low_wall_lr
                    
                    
                    
    return dungeon